<p-dialog [style]="{'width':'800px'}" [closable]="false" header='Upload Images (Max 5)' [(visible)]="showDialog" modal="true" closeOnEscape="true">

    <div fxLayout='column' fxLayoutGap='2%'>
        <p-dataTable *ngIf='imageMetas.length>0' [style]="{'width':'700px'}" [value]="imageMetas" emptyMessage='Nothing to preview'>
            <p-column field="name" header="Name"></p-column>
            <p-column header="Size">
                <ng-template let-img='rowData' pTemplate='body'>
                    <span>{{img.size | size}}</span>
                </ng-template>
            </p-column>
            <p-column *ngIf='uploading && !uploadFail' [style]="{'width':'38px'}">
                <ng-template let-img="rowData" pTemplate="body">
                    <!--<i *ngIf='img.status' class="mdi mdi-check"></i>-->
                    <i *ngIf='img.status' class="material-icons">done</i>
                    <div *ngIf='!img.status' class='progress'></div>
                </ng-template>
            </p-column>
            <p-column *ngIf='!uploading && !uploaded && !uploadFail' [style]="{'width':'38px'}">
                <ng-template let-img="rowData" pTemplate="body">
                    <i class="material-icons" (click)="deleteImage(img)">delete</i>
                </ng-template>
            </p-column>
            <p-column *ngIf='uploadFail' [style]="{'width':'38px'}">
                <ng-template let-img="rowData" pTemplate="body">
                    <i class="material-icons">warning</i>
                </ng-template>
            </p-column>
        </p-dataTable>

        <div *ngIf='images.length<=0' cbdDragDrop [options]="options" (fileOver)="fileOver($event)" [ngClass]="{'hovering': hover}" (onFileDrop)="onFilesChange($event)" class="uploader-box" fxLayout="column" fxLayoutAlign="center center">
            <i class="big mdi mdi-cloud-upload"></i>
            <div fxLayout='column' fxLayoutAlign='center center' fxLayoutGap='2%'>
                <span class="message">Drag images here</span>
                <span>OR</span>
                <input [hidden]='true' type="file" accept="image/*" multiple="multiple" #file (change)='onFilesSelected($event)'>
                <span class="message-select" (click)='file.click()'>Choose Image</span>
            </div>
        </div>

        <div class="buttons" fxLayout='row' fxLayoutAlign='end' fxLayoutGap='2%'>
            <app-button *ngIf='!uploading' title='Cancel' (click)='hide()'></app-button>
            <app-button [disabled]='uploading' *ngIf='!getUploadStatus()' title='Upload' (click)='uploadImages()'></app-button>
            <app-button *ngIf='getUploadStatus()' title='Done' (click)='done()'></app-button>
            <app-button *ngIf='uploadFail' title='Back' (click)='done()'></app-button>
        </div>
    </div>
</p-dialog>